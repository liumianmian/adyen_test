<?php
header("Content-type: application/json;charset=UTF-8");
require_once __DIR__ . "/../../../functions/Reports.php";

$post                    = getPostInfo();
$chargebackDateParameter = isset($post['chargebackDateParameter'])?$post['chargebackDateParameter']:'';
$reportType              = isset($post['reportType'])?$post['reportType']:'';
if ($reportType == 'overall_statistics') {
    if ($chargebackDateParameter == 'transaction')
    {
        //chargebackreportdata.shtml?ignoresaverequest=true&type=GET&format=JSON&
        //reportType=overall_statistics&chargebackDateParameter=transaction&
        //startdate=2016-12-23&enddate=2017-01-22&granularity=day
        $overallStatistics = statOverallStatistics();
        echo json_encode(['overall_statistics' => $overallStatistics]);
        die;
        //echo '{"overall_statistics":[{"date":"2016-12-23","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-24","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-25","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-26","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-27","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-28","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-29","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-30","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-31","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-02","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-03","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-04","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-05","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-06","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-07","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-08","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-09","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-10","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-11","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-12","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-13","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-14","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-15","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-16","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-17","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-18","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-19","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-20","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2017-01-21","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0}]}';
        //die;
    } else if ($chargebackDateParameter == 'chargeback') {
        //chargebackreportdata.shtml?ignoresaverequest=true&type=GET&format=JSON&
        //reportType=overall_statistics&chargebackDateParameter=chargeback&
        //startdate=2016-01-01&enddate=2017-01-01&granularity=month&
        //paymentMethod=&shopperInteraction=&countryFilter=
        $overallStatistics = statOverallStatistics();
        echo json_encode(['overall_statistics' => $overallStatistics]);
        die;
        echo '{"overall_statistics":[{"date":"2016-01-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-02-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-03-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-04-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-05-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-06-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-07-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-08-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-09-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-10-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-11-01","authorisedCount":0,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":0,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0},{"date":"2016-12-01","authorisedCount":1,"chargebackCount":0,"fraudNotificationsCount":0,"authorisedEurAmount":96,"chargebackEurAmount":0,"fraudNotificationsEurAmount":0,"cancelledByRiskCount":0,"cancelledByRiskAmount":0}]}';
    }
} else if ($reportType == 'country_statistics') {
    if ($chargebackDateParameter == 'chargeback') {
        //chargebackreportdata.shtml?ignoresaverequest=true&type=GET&format=JSON&
        //reportType=country_statistics&chargebackDateParameter=chargeback&
        //startdate=2016-01-01&enddate=2017-01-01&granularity=month&
        //paymentMethod=&shopperInteraction=&countryFilter=&hasRegionData=true
        $countryStatistics = chargeBackCountryStatistics();
        echo json_encode(['country_statistics' => $countryStatistics]);

    }
} else if ($reportType == 'payment_method_statistics') {
    if ($chargebackDateParameter == 'chargeback')
    {
        //chargebackreportdata.shtml?ignoresaverequest=true&type=GET&format=JSON&
        //reportType=payment_method_statistics&
        //chargebackDateParameter=chargeback&startdate=2016-01-01&enddate=2017-01-01&
        //granularity=month&paymentMethod=&shopperInteraction=&countryFilter=
        $paymentMethodStatistics = chargeBackPaymentMethodStatistics();
        echo json_encode(['payment_method_statistics' => $paymentMethodStatistics]);die;
    }
}


